<span class="uk-default uk-position-center" uk-spinner="ratio:10"></span>
<h3 class="uk-position-center" loadingProgress></h3>
<script>
(function(){

    function onProgress( current, total ){
        const progress = Math.ceil(current/total*100);
        $('[loadingProgress]').innerHTML = `${progress}%`;
    }

    addEvent( window,'load',()=>{
        const config = /°process.env.GODOT_CONFIG°/;
        const engine = new Engine( config );
        engine.startGame({ onProgress });
    })

    window.ongameloaded = function(){
        for( const event of godot.events ) event()
        $('[page=progress]').hidden = true;
        $('[page=home]').hidden = false;
    }

})()
</script>